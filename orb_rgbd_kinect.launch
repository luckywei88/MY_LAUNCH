<launch>
	<arg name="robot_id" default="0"/>
	<include file="$(find openni_launch)/launch/openni.launch">
		<arg name="camera" 			value="robot$(arg robot_id)"/>
	</include>

	<node pkg="getmap" type="getmap" name="getmap$(arg robot_id)">
		<param name="map_tf"			value="/robot$(arg robot_id)/world"/>	

		<remap from="/tmp/pointcloud"		to="/robot$(arg robot_id)/tmp/pointcloud"/>
		<remap from="/result/pointcloud"	to="/robot$(arg robot_id)/result/pointcloud"/>
		<remap from="/tmp/cmd"			to="/robot$(arg robot_id)/tmp/cmd"/>
	</node>	

<!--
	<node pkg="getgridmap" type="getgridmap" name="getgridmap$(arg robot_id)">
		<param name="robot_id" 		type="int" 	value="$(arg robot_id)"/>
		<remap from="/projected_map" 	to="/robot$(arg robot_id)/projected_map"/>
		<remap from="/robot_yaw" 	to="/robot$(arg robot_id)/robot_yaw"/>
	</node>
-->

	<node pkg="octomap_server" type="octomap_server_node" name="octomap_server$(arg robot_id)">
                <param name="resolution" value="0.05"/>
		<param name="robot_h" type="double" 	value="0.4"/>
		<param name="height"  type="double" 	value="0.8"/>
                <param name="robot_id"  type="int" 	value="$(arg robot_id)"/>
                <param name="model"  	type="int" 	value="1"/>
                <param name="dynamic_map"         	value="true"/>
                <param name="complete_map"        	value="false"/>

                <param name="robot_id"  type="int" 	value="$(arg robot_id)"/>
                <param name="frame_id" 			value="/robot$(arg robot_id)/world"/>

                <remap from="/tmp/pointcloud" 		to="/robot$(arg robot_id)/tmp/pointcloud"/>
		<remap from="/tmp/cmd"			to="/robot$(arg robot_id)/tmp/cmd"/>

                <remap from="projected_map" 		to="/robot$(arg robot_id)/projected_map"/>
                <remap from="robot_yaw" 		to="/robot$(arg robot_id)/robot_yaw"/>
                <remap from="occupied_cells_vis_array" 	to="/robot$(arg robot_id)/occupied_cells_vis_array"/>
        </node>


	<node pkg="orb_slam" type="RGBD" name="slam2rgbd$(arg robot_id)" output="screen">
		<param name="use_gui"		type="bool"	value="true"/>
		<param name="base_tf"		value="/robot$(arg robot_id)/base_link"/>
		<param name="world_tf"		value="/robot$(arg robot_id)/world"/>
		<param name="bag_of_word"	value="/home/lucky/worksapce/src/orb_slam/Vocabulary/ORBvoc.txt"/>
		<param name="config"        	value="/home/lucky/worksapce/src/orb_slam/Examples/RGB-D/kinect.yaml"/>
		<remap from="/rgb"	    	to="/robot$(arg robot_id)/rgb/image_color"/>
		<remap from="/depth"         	to="/robot$(arg robot_id)/depth/image_raw"/>
		<!--param name="/depth"             value="/robot$(arg robot_id)/depth_registered/sw_registered/image_rect_raw"/-->
		<remap from="/tmp/pointcloud"	to="/robot$(arg robot_id)/tmp/pointcloud"/>
		<remap from="/tmp/cmd"		to="/robot$(arg robot_id)/tmp/cmd"/>
	</node>

</launch>
